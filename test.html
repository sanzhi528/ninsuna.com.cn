<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœåŠ¡å™¨æµ‹è¯•é¡µé¢</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        .success { color: green; }
        .error { color: red; }
        .info { color: blue; }
    </style>
</head>
<body>
    <h1>æœåŠ¡å™¨è¿æ¥æµ‹è¯•</h1>
    
    <div id="status">
        <h2>è¿æ¥çŠ¶æ€ï¼š<span id="connectionStatus">æµ‹è¯•ä¸­...</span></h2>
    </div>
    
    <div id="fileTests">
        <h3>æ–‡ä»¶è®¿é—®æµ‹è¯•ï¼š</h3>
        <ul>
            <li>index.html: <span id="indexStatus">æµ‹è¯•ä¸­...</span></li>
            <li>src/main.js: <span id="mainjsStatus">æµ‹è¯•ä¸­...</span></li>
            <li>logo.svg: <span id="logoSvgStatus">æµ‹è¯•ä¸­...</span></li>
        </ul>
    </div>
    
    <div id="consoleOutput">
        <h3>æ§åˆ¶å°è¾“å‡ºï¼š</h3>
        <pre id="consoleLog"></pre>
    </div>
    
    <script>
        const consoleLog = document.getElementById('consoleLog');
        const connectionStatus = document.getElementById('connectionStatus');
        const indexStatus = document.getElementById('indexStatus');
        const mainjsStatus = document.getElementById('mainjsStatus');
        const logoSvgStatus = document.getElementById('logoSvgStatus');
        
        // é‡å†™console.logä»¥åœ¨é¡µé¢ä¸Šæ˜¾ç¤º
        const originalConsoleLog = console.log;
        console.log = function(...args) {
            originalConsoleLog.apply(console, args);
            consoleLog.textContent += args.join(' ') + '\n';
        };
        
        // æµ‹è¯•æ–‡ä»¶è®¿é—®
        async function testFileAccess(url, element) {
            try {
                const response = await fetch(url);
                if (response.ok) {
                    element.innerHTML = '<span class="success">âœ… å¯è®¿é—®</span>';
                    console.log(`âœ… ${url} - å¯è®¿é—® (${response.status})`);
                } else {
                    element.innerHTML = `<span class="error">âŒ é”™è¯¯: ${response.status}</span>`;
                    console.log(`âŒ ${url} - é”™è¯¯: ${response.status}`);
                }
            } catch (error) {
                element.innerHTML = `<span class="error">âŒ å¤±è´¥: ${error.message}</span>`;
                console.log(`âŒ ${url} - å¤±è´¥: ${error.message}`);
            }
        }
        
        // è¿è¡Œæµ‹è¯•
        console.log('å¼€å§‹æœåŠ¡å™¨è¿æ¥æµ‹è¯•...');
        connectionStatus.innerHTML = '<span class="info">ğŸ”„ æµ‹è¯•ä¸­...</span>';
        
        // æµ‹è¯•åŸºæœ¬è¿æ¥
        fetch('/')
            .then(response => {
                if (response.ok) {
                    connectionStatus.innerHTML = '<span class="success">âœ… è¿æ¥æˆåŠŸ</span>';
                    console.log('âœ… æœåŠ¡å™¨è¿æ¥æˆåŠŸ');
                } else {
                    connectionStatus.innerHTML = `<span class="error">âŒ è¿æ¥é”™è¯¯: ${response.status}</span>`;
                    console.log(`âŒ è¿æ¥é”™è¯¯: ${response.status}`);
                }
            })
            .catch(error => {
                connectionStatus.innerHTML = `<span class="error">âŒ è¿æ¥å¤±è´¥: ${error.message}</span>`;
                console.log(`âŒ è¿æ¥å¤±è´¥: ${error.message}`);
            })
            .finally(() => {
                // æµ‹è¯•æ–‡ä»¶è®¿é—®
                testFileAccess('/index.html', indexStatus);
                testFileAccess('/src/main.js', mainjsStatus);
                testFileAccess('/logo.svg', logoSvgStatus);
            });
    </script>
</body>
</html>